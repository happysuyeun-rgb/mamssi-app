# 마음씨앱 기능 테스트 결과

## 테스트 일시
- 시작: [날짜/시간]
- 종료: [날짜/시간]

## 테스트 환경
- 브라우저: Chrome/Edge
- 개발 서버: `http://localhost:5173`
- 데이터베이스: Supabase

---

## 1. 인증 및 온보딩 테스트

### 1.1 신규 사용자 회원가입
- [ ] `/signup` 접속 성공
- [ ] 이메일/비밀번호 회원가입 또는 소셜 로그인 (Google) 성공
- [ ] 회원가입 완료 후 자동 리다이렉트 확인
- [ ] 온보딩 화면으로 이동 확인

**예상 결과**: 회원가입 성공 → 온보딩 화면으로 이동

### 1.2 온보딩 플로우
- [ ] 온보딩 화면 진입 (`/onboarding`)
- [ ] 각 단계 진행 확인
- [ ] 씨앗 이름 입력 (10자 이내) - 예: "봄비"
- [ ] "시작하기" 버튼 클릭
- [ ] `users.onboarding_completed = true` 저장 확인 (Supabase Dashboard에서 확인)
- [ ] `user_settings.seed_name` 저장 확인 (Supabase Dashboard에서 확인)
- [ ] 홈 화면(`/home`)으로 리다이렉트 확인

**예상 결과**: 온보딩 완료 → DB 업데이트 → 홈 화면 이동

### 1.3 온보딩 완료 사용자 재접속
- [ ] 온보딩 완료 사용자로 로그인
- [ ] 앱 접속 시 홈 화면으로 바로 이동 확인
- [ ] 온보딩 화면으로 리다이렉트되지 않음 확인

**예상 결과**: 로그인 → 홈 화면으로 바로 이동 (온보딩 스킵)

### 1.4 기존 사용자 로그인
- [ ] `/login` 접속
- [ ] 이메일/비밀번호 또는 소셜 로그인
- [ ] 로그인 성공 후 홈 화면 이동 확인

**예상 결과**: 로그인 성공 → 홈 화면 이동

---

## 2. 홈 화면 테스트

### 2.1 홈 화면 진입
- [ ] `/home` 또는 `/` 접속
- [ ] 헤더 표시 확인
- [ ] 씨앗 배지 표시 확인 (성장률, 씨앗 이름)
- [ ] 주간 달력 위젯 표시 확인 (7일)
- [ ] 알림 섹션 표시 확인
- [ ] 탭바 표시 확인 (홈, 공감숲, 기록, 마이프로필)

**예상 결과**: 모든 UI 요소 정상 표시

### 2.2 씨앗 이름 수정
- [ ] 씨앗 배지의 편집 아이콘(✏️) 클릭
- [ ] 모달 열림 확인
- [ ] 씨앗 이름 입력 (1-10자) - 예: "햇살"
- [ ] 저장 버튼 클릭
- [ ] `user_settings.seed_name` 업데이트 확인 (콘솔 로그 확인)
- [ ] UI에 반영 확인 (씨앗 배지에 새 이름 표시)
- [ ] 성공 토스트 메시지 확인: "씨앗 이름이 '햇살'로 변경되었어요. ✨"

**예상 결과**: 씨앗 이름 저장 성공 → UI 즉시 반영

**주의사항**: 
- 콘솔에서 `[FlowerBadge] 씨앗 이름 저장 성공` 로그 확인
- `[useSettings] 설정 업데이트 성공` 로그 확인
- RLS 정책 오류가 발생하면 `fix_profile_url_upload.sql` 실행 필요

### 2.3 씨앗 이름 유효성 검사
- [ ] 빈 값 입력 시 경고 메시지: "씨앗 이름을 입력해주세요. ⚠️"
- [ ] 10자 초과 입력 시 경고 메시지: "씨앗 이름은 10자 이내로 입력해주세요. ⚠️"
- [ ] 정상 값 입력 시 저장 성공 확인

**예상 결과**: 유효성 검사 정상 동작

### 2.4 주간 달력 - 오늘 날짜 클릭
- [ ] 오늘 날짜 클릭
- [ ] 기록 화면(`/record`)으로 이동 확인
- [ ] URL에 날짜 파라미터 전달 확인: `/record?date=YYYY-MM-DD`

**예상 결과**: 기록 화면으로 이동, 날짜 파라미터 전달

### 2.5 주간 달력 - 과거 날짜 클릭
- [ ] 과거 날짜 클릭
- [ ] 기록이 있으면: 감정 모달 표시 (감정 이모지, 내용)
- [ ] 기록이 없으면: 기록 화면으로 이동 (`/record?date=YYYY-MM-DD`)

**예상 결과**: 기록 유무에 따라 적절한 동작

### 2.5.1 기록 상세 모달 - 이미지 표시 ⭐ 신규 기능
- [ ] 이미지가 있는 기록 날짜 클릭
- [ ] 기록 상세 모달 표시 확인
- [ ] 이미지가 썸네일 스트립 형태로 표시되는지 확인 (60px x 60px)
- [ ] 이미지가 입력 필드 형태의 박스가 아닌 자연스러운 배치인지 확인
- [ ] 이미지 border-radius: 14px 확인
- [ ] 이미지 간 gap: 10px 확인
- [ ] 이미지가 없을 때는 해당 영역이 렌더링되지 않는지 확인
- [ ] 이미지 hover 효과 확인 (선택사항)

**예상 결과**: 이미지가 썸네일 스트립 형태로 자연스럽게 표시

**주의사항**:
- 입력 필드 형태의 박스 UI가 아닌지 확인
- 이미지가 컨텐츠 흐름을 방해하지 않는지 확인
- 이미지가 기록의 보조 시각 요소로만 존재하는지 확인

### 2.6 주간 달력 - 미래 날짜 클릭 ⭐ 중요
- [ ] 미래 날짜 클릭
- [ ] "⚠️ 미래날짜는 기록할수 없어요!" 토스트 메시지 확인
- [ ] 기록 화면으로 이동하지 않음 확인

**예상 결과**: 토스트 메시지 표시, 이동하지 않음

### 2.7 알림 기능
- [ ] 알림 아이콘 클릭
- [ ] 알림 목록 표시 확인
- [ ] 알림 읽음 처리 확인
- [ ] 알림 삭제 확인

**예상 결과**: 알림 기능 정상 동작

---

## 3. 기록 화면 테스트

### 3.1 기록 화면 진입
- [ ] `/record` 접속
- [ ] 날짜 선택기 표시 확인
- [ ] 감정 선택 UI 표시 확인 (기쁨, 슬픔, 화남, 놀람, 두려움 등)
- [ ] 내용 입력 필드 표시 확인
- [ ] 사진 첨부 기능 확인
- [ ] 공개/비공개 토글 확인

**예상 결과**: 모든 UI 요소 정상 표시

### 3.2 감정 기록 저장 ⭐ 중요
- [ ] 감정 선택 (예: 기쁨 😊)
- [ ] 내용 입력 (예: "오늘 날씨가 좋아서 기분이 좋아요")
- [ ] 사진 첨부 (선택, 10MB 이하)
- [ ] 공개 설정 (선택)
- [ ] 저장 버튼 클릭
- [ ] `emotions` 테이블에 저장 확인 (Supabase Dashboard에서 확인)
- [ ] 성공 토스트 메시지 확인
- [ ] 홈 화면으로 리다이렉트 확인

**예상 결과**: 기록 저장 성공 → DB 저장 → 홈 화면 이동

**주의사항**:
- 콘솔에서 `[useEmotions] 감정 기록 저장 성공` 로그 확인
- `emotion_type` 필드 오류가 발생하면 `fix_emotion_type_trigger_error.sql` 실행 필요
- 트리거 함수가 `main_emotion`을 사용하는지 확인

### 3.2.1 감정 기록 이미지 업로드 ⭐ 신규 기능
- [ ] 기록 화면에서 "사진 첨부" 버튼 클릭
- [ ] 이미지 파일 선택 (JPG, PNG, 10MB 이하)
- [ ] 이미지 미리보기 표시 확인
- [ ] 이미지 삭제 버튼(X) 클릭 시 미리보기 제거 확인
- [ ] 저장 버튼 클릭
- [ ] 업로드 진행 상태 확인 (로딩 표시)
- [ ] Storage 버킷(`emotion-images`)에 저장 확인 (Supabase Dashboard > Storage에서 확인)
- [ ] Public URL 생성 확인 (콘솔 로그 확인)
- [ ] `emotions.image_url` 필드에 URL 저장 확인 (Supabase Dashboard에서 확인)
- [ ] 성공 토스트 메시지 확인
- [ ] 홈 화면으로 리다이렉트 확인

**예상 결과**: 이미지 업로드 성공 → Storage 저장 → DB 업데이트 → 홈 화면 이동

**주의사항**:
- 콘솔에서 `[uploadEmotionImage] 파일 업로드 성공` 로그 확인
- 버킷이 없으면 `create_emotion_images_bucket.sql` 실행 필요
- RLS 정책 오류가 발생하면 `create_emotion_images_bucket.sql` 재실행

### 3.2.2 감정 기록 이미지 유효성 검사
- [ ] 10MB 초과 이미지 선택 시 경고 메시지: "10MB 이하의 이미지만 첨부할 수 있어요 ⚠️"
- [ ] 이미지가 아닌 파일 선택 시 경고 메시지 확인
- [ ] 정상 이미지 파일 선택 시 업로드 성공 확인

**예상 결과**: 유효성 검사 정상 동작

### 3.2.3 감정 기록 이미지 개수 제한 ⭐ 신규 기능
- [ ] 이미지 0개 상태에서 이미지 1개 추가 → 성공 확인
- [ ] 이미지 1개 상태에서 이미지 1개 더 추가 (총 2개) → 성공 확인
- [ ] 이미지 2개 상태에서 이미지 추가 시도 → 경고 메시지: "이미지는 최대 2개까지 첨부할 수 있어요 ⚠️"
- [ ] 이미지 2개 상태에서 추가 불가 확인
- [ ] 이미지 1개 삭제 후 다시 추가 가능한지 확인
- [ ] 여러 파일 선택 시 남은 슬롯만큼만 추가되고 경고 메시지 표시 확인

**예상 결과**: 이미지 개수 제한 정상 동작

**주의사항**:
- 안내 문구에 "최대 2개" 표시 확인
- 2개 초과 시 명확한 경고 메시지 표시

### 3.2.4 감정 기록 이미지 업로드 에러 처리
- [ ] 버킷이 없을 때 명확한 에러 메시지 표시 확인: "Storage 버킷 'emotion-images'이 존재하지 않거나 접근할 수 없어요..."
- [ ] 네트워크 에러 시 에러 메시지 표시 확인
- [ ] 권한 에러 시 에러 메시지 표시 확인

**예상 결과**: 에러 메시지 정상 표시

### 3.3 기록 수정
- [ ] 기존 기록 날짜 선택
- [ ] 기존 기록 데이터 로드 확인 (감정, 내용, 이미지, 공개 설정)
- [ ] 내용 수정
- [ ] 이미지 교체 (선택)
- [ ] 저장 버튼 클릭
- [ ] 업데이트 확인 (Supabase Dashboard에서 확인)

**예상 결과**: 기록 수정 성공

### 3.3.1 기록 이미지 수정
- [ ] 기존 이미지가 있는 기록 선택
- [ ] 기존 이미지 미리보기 표시 확인
- [ ] 새 이미지 선택
- [ ] 새 이미지 미리보기 표시 확인
- [ ] 저장 버튼 클릭
- [ ] 기존 이미지 Storage에서 삭제 확인 (Supabase Dashboard > Storage에서 확인)
- [ ] 새 이미지 업로드 확인
- [ ] `emotions.image_url` 업데이트 확인 (Supabase Dashboard에서 확인)

**예상 결과**: 이미지 교체 성공

### 3.3.2 기록 이미지 삭제
- [ ] 기존 이미지가 있는 기록 선택
- [ ] 이미지 미리보기에서 X 버튼 클릭
- [ ] 이미지 미리보기 제거 확인
- [ ] 저장 버튼 클릭
- [ ] `emotions.image_url = null` 확인 (Supabase Dashboard에서 확인)
- [ ] Storage에서 이미지 삭제 확인 (선택사항)

**예상 결과**: 이미지 삭제 성공

### 3.4 기록 삭제
- [ ] 기존 기록 날짜 선택
- [ ] 삭제 버튼 클릭
- [ ] 확인 다이얼로그 표시
- [ ] 삭제 확인
- [ ] DB에서 삭제 확인 (Supabase Dashboard에서 확인)

**예상 결과**: 기록 삭제 성공

---

## 4. 공감숲 (커뮤니티) 테스트

### 4.1 공감숲 화면 진입
- [ ] `/forest` 접속
- [ ] 탭바 표시 확인
- [ ] 피드 목록 표시 확인
- [ ] 카테고리 탭 표시 확인 (전체, 일상, 고민, 연애, 회사, 유머, 성장, 자기돌봄)

**예상 결과**: 피드 목록 정상 표시

### 4.2 피드 조회
- [ ] 전체 피드 조회 확인
- [ ] 카테고리별 필터링 확인 (각 카테고리 탭 클릭)
- [ ] 내 게시글 필터 확인 (`/forest/my-posts`)

**예상 결과**: 필터링 정상 동작

### 4.3 게시글 상세
- [ ] 게시글 카드 클릭
- [ ] 상세 모달 표시 확인
- [ ] 내용 표시 확인
- [ ] 좋아요 버튼 확인

**예상 결과**: 상세 모달 정상 표시

### 4.4 좋아요 기능
- [ ] 좋아요 버튼 클릭
- [ ] 좋아요 수 증가 확인
- [ ] DB 업데이트 확인 (Supabase Dashboard에서 확인)
- [ ] 다시 클릭 시 취소 확인

**예상 결과**: 좋아요 기능 정상 동작

### 4.5 신고 기능
- [ ] 신고 버튼 클릭
- [ ] 신고 다이얼로그 표시 확인
- [ ] 신고 사유 선택
- [ ] 신고 제출 확인

**예상 결과**: 신고 기능 정상 동작

---

## 5. 마이프로필 테스트

### 5.1 마이프로필 화면 진입
- [ ] `/mypage` 접속
- [ ] 프로필 정보 표시 확인 (이름, MBTI, 프로필 이미지)
- [ ] 통계 (기록, 공감, 개화) 표시 확인
- [ ] 메뉴 목록 표시 확인 (계정 정보, 프로필 설정, 알림 설정, 감정꽃 앨범)

**예상 결과**: 모든 UI 요소 정상 표시

### 5.2 프로필 설정
- [ ] "프로필 설정" 클릭
- [ ] 닉네임 수정 (1-12자)
- [ ] MBTI 선택
- [ ] 프로필 이미지 업로드 (다음 섹션 참조)
- [ ] 저장 버튼 클릭
- [ ] `user_settings` 업데이트 확인 (Supabase Dashboard에서 확인)
- [ ] UI 반영 확인

**예상 결과**: 프로필 설정 저장 성공

### 5.3 프로필 이미지 업로드 ⭐ 중요
- [ ] 프로필 이미지 선택 버튼 클릭
- [ ] 이미지 파일 선택 (5MB 이하, jpeg/jpg/png/webp/gif)
- [ ] 업로드 진행 확인 (로딩 표시)
- [ ] Storage 버킷(`profile-images`)에 저장 확인 (Supabase Dashboard > Storage에서 확인)
- [ ] Public URL 생성 확인 (콘솔 로그 확인)
- [ ] `user_settings.profile_url` 업데이트 확인 (Supabase Dashboard에서 확인)
- [ ] 프로필 이미지 표시 확인
- [ ] 성공 토스트 메시지 확인: "프로필 이미지가 적용되었어요 ✅"

**예상 결과**: 프로필 이미지 업로드 성공 → Storage 저장 → DB 업데이트 → UI 반영

**주의사항**:
- 콘솔에서 `[uploadProfileImage] 파일 업로드 성공` 로그 확인
- `[MyPage] 프로필 이미지 업로드 및 저장 완료` 로그 확인
- 버킷이 없으면 `create_profile_images_bucket.sql` 실행 필요
- RLS 정책 오류가 발생하면 `fix_profile_url_upload.sql` 실행 필요

### 5.4 프로필 이미지 삭제
- [ ] 기본 이모티콘으로 변경 버튼 클릭
- [ ] Storage에서 이미지 삭제 확인 (Supabase Dashboard > Storage에서 확인)
- [ ] `user_settings.profile_url = null` 확인 (Supabase Dashboard에서 확인)
- [ ] 기본 이모티콘 표시 확인
- [ ] 성공 토스트 메시지 확인: "기본 이모티콘 프로필로 변경했어요 ✅"

**예상 결과**: 프로필 이미지 삭제 성공

### 5.5 감정꽃 앨범
- [ ] "감정꽃 앨범" 클릭
- [ ] 개화한 꽃 목록 표시 확인 (`flowers.is_bloomed = true`)
- [ ] 씨앗 이름 기반 제목 표시 확인 (예: "봄비의 꽃")
- [ ] 꽃 이미지 표시 확인

**예상 결과**: 앨범 목록 정상 표시

### 5.6 알림 설정
- [ ] "알림 설정" 클릭
- [ ] 알림 옵션 표시 확인
- [ ] 설정 저장 확인

**예상 결과**: 알림 설정 정상 동작

### 5.7 계정 정보
- [ ] "계정 정보" 섹션 확인
- [ ] 사용자 ID 표시 확인
- [ ] 로그인 정보 표시 확인 (소셜 제공자, 이메일)
- [ ] 소셜 계정 관리 버튼 확인

**예상 결과**: 계정 정보 정상 표시

### 5.8 계정 탈퇴
- [ ] "계정 탈퇴" 클릭
- [ ] 탈퇴 페이지 이동 확인 (`/delete-account`)
- [ ] 탈퇴 사유 선택
- [ ] 확인 다이얼로그 표시
- [ ] 탈퇴 확인
- [ ] `users.is_deleted = true` 확인 (Supabase Dashboard에서 확인)
- [ ] `users.delete_reason` 저장 확인 (Supabase Dashboard에서 확인)
- [ ] 알림 생성 확인 (`notifications` 테이블에서 확인)
- [ ] 로그아웃 및 온보딩으로 리다이렉트 확인

**예상 결과**: 계정 탈퇴 성공 → DB 업데이트 → 알림 생성 → 로그아웃

---

## 6. 잠금 화면 테스트

### 6.1 잠금 설정
- [ ] 마이프로필 > 잠금 설정
- [ ] PIN 또는 패턴 설정
- [ ] 잠금 활성화 확인

**예상 결과**: 잠금 설정 성공

### 6.2 잠금 해제
- [ ] 앱 재접속
- [ ] 잠금 화면 표시 확인
- [ ] PIN/패턴 입력
- [ ] 잠금 해제 확인

**예상 결과**: 잠금 해제 성공

---

## 7. 네비게이션 테스트

### 7.1 탭바 네비게이션
- [ ] 홈 탭 클릭 → `/home` 이동 확인
- [ ] 공감숲 탭 클릭 → `/forest` 이동 확인
- [ ] 기록 탭 클릭 → `/record` 이동 확인
- [ ] 마이프로필 탭 클릭 → `/mypage` 이동 확인
- [ ] 활성 탭 하이라이트 확인 (초록색 배경, 테두리)

**예상 결과**: 탭 네비게이션 정상 동작

### 7.2 브라우저 뒤로가기
- [ ] 여러 화면 이동
- [ ] 브라우저 뒤로가기 버튼 클릭
- [ ] 이전 화면으로 이동 확인

**예상 결과**: 브라우저 히스토리 정상 동작

---

## 8. 에러 처리 테스트

### 8.1 네트워크 에러
- [ ] 네트워크 연결 끊기 (개발자 도구 > Network > Offline)
- [ ] API 호출 시 에러 메시지 표시 확인
- [ ] 재시도 옵션 확인

**예상 결과**: 에러 메시지 정상 표시

### 8.2 권한 에러
- [ ] RLS 정책 위반 시 에러 메시지 확인
- [ ] 명확한 에러 메시지 표시 확인

**예상 결과**: 권한 에러 메시지 정상 표시

### 8.3 유효성 검사
- [ ] 필수 필드 누락 시 경고 메시지 확인
- [ ] 잘못된 형식 입력 시 경고 메시지 확인

**예상 결과**: 유효성 검사 정상 동작

---

## 9. 성능 테스트

### 9.1 초기 로딩
- [ ] 앱 첫 진입 시 로딩 시간 확인
- [ ] 스켈레톤 UI 표시 확인 (있는 경우)

**예상 결과**: 로딩 시간 적절 (3초 이내)

### 9.2 데이터 새로고침
- [ ] Realtime 구독 동작 확인 (Supabase Realtime)
- [ ] 데이터 변경 시 자동 업데이트 확인

**예상 결과**: Realtime 구독 정상 동작

---

## 10. 반응형 테스트

### 10.1 모바일 뷰
- [ ] 모바일 화면 크기에서 레이아웃 확인 (375px, 414px)
- [ ] 터치 영역 충분한지 확인 (최소 44px)

**예상 결과**: 모바일 레이아웃 정상

### 10.2 데스크톱 뷰
- [ ] 데스크톱 화면 크기에서 레이아웃 확인 (1920px)
- [ ] 최대 너비 제한 확인 (720px)

**예상 결과**: 데스크톱 레이아웃 정상

---

## 발견된 이슈

### Critical (즉시 수정 필요)
1. [이슈 설명]
   - 재현 단계:
   - 예상 결과:
   - 실제 결과:
   - 스크린샷:

### High (우선 수정)
1. [이슈 설명]
   - 재현 단계:
   - 예상 결과:
   - 실제 결과:

### Medium (향후 수정)
1. [이슈 설명]
   - 재현 단계:
   - 예상 결과:
   - 실제 결과:

---

## 테스트 완료 체크리스트

### 필수 기능 (Critical)
- [ ] 로그인/회원가입
- [ ] 온보딩 완료 및 씨앗 받기
- [ ] 씨앗 이름 수정
- [ ] 프로필 이미지 업로드
- [ ] 감정 기록 저장
- [ ] 감정 기록 이미지 업로드 ⭐ 신규
- [ ] 주간 달력 미래 날짜 체크
- [ ] 알림 기능
- [ ] 계정 탈퇴

### 중요 기능 (High)
- [ ] 기록 수정/삭제
- [ ] 공감숲 피드 조회
- [ ] 좋아요 기능
- [ ] 감정꽃 앨범

### 일반 기능 (Medium)
- [ ] 잠금 화면
- [ ] 알림 설정
- [ ] 신고 기능

---

## 테스트 결과 요약

### 통과한 테스트: [개수]
- [테스트 항목 목록]

### 실패한 테스트: [개수]
- [테스트 항목 목록] - [실패 이유]

### 스킵한 테스트: [개수]
- [테스트 항목 목록] - [스킵 이유]

---

## 다음 단계

1. [ ] 발견된 이슈 수정
2. [ ] 재테스트 진행
3. [ ] 프로덕션 배포 준비
